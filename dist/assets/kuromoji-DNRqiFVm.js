import{g as Xa}from"./zlibjs-aWd8_TjF.js";function Ja(e,n){for(var t=0;t<n.length;t++){const a=n[t];if(typeof a!="string"&&!Array.isArray(a)){for(const f in a)if(f!=="default"&&!(f in e)){const l=Object.getOwnPropertyDescriptor(a,f);l&&Object.defineProperty(e,f,l.get?l:{enumerable:!0,get:()=>a[f]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var Vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Za(e){if(e.__esModule)return e;var n=e.default;if(typeof n=="function"){var t=function a(){return this instanceof a?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};t.prototype=n.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var f=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,f.get?f:{enumerable:!0,get:function(){return e[a]}})}),t}function $a(e,n,t,a,f,l,h,y){this.name=e,this.cost=n,this.start_pos=t,this.length=a,this.left_id=l,this.right_id=h,this.prev=null,this.surface_form=y,f==="BOS"?this.shortest_cost=0:this.shortest_cost=Number.MAX_VALUE,this.type=f}var _n=$a,bn=_n;function Wt(){this.nodes_end_at=[],this.nodes_end_at[0]=[new bn(-1,0,0,0,"BOS",0,0,"")],this.eos_pos=1}Wt.prototype.append=function(e){var n=e.start_pos+e.length-1;this.eos_pos<n&&(this.eos_pos=n);var t=this.nodes_end_at[n];t==null&&(t=[]),t.push(e),this.nodes_end_at[n]=t};Wt.prototype.appendEos=function(){var e=this.nodes_end_at.length;this.eos_pos++,this.nodes_end_at[e]=[new bn(-1,0,this.eos_pos,0,"EOS",0,0,"")]};var ro=Wt;function mr(e){this.str=e,this.index_mapping=[];for(var n=0;n<e.length;n++){var t=e.charAt(n);this.index_mapping.push(n),mr.isSurrogatePair(t)&&n++}this.length=this.index_mapping.length}mr.prototype.slice=function(e){if(this.index_mapping.length<=e)return"";var n=this.index_mapping[e];return this.str.slice(n)};mr.prototype.charAt=function(e){if(this.str.length<=e)return"";var n=this.index_mapping[e],t=this.index_mapping[e+1];return t==null?this.str.slice(n):this.str.slice(n,t)};mr.prototype.charCodeAt=function(e){if(this.index_mapping.length<=e)return NaN;var n=this.index_mapping[e],t=this.str.charCodeAt(n),a;return t>=55296&&t<=56319&&n<this.str.length&&(a=this.str.charCodeAt(n+1),a>=56320&&a<=57343)?(t-55296)*1024+a-56320+65536:t};mr.prototype.toString=function(){return this.str};mr.isSurrogatePair=function(e){var n=e.charCodeAt(0);return n>=55296&&n<=56319};var wn=mr,gn=_n,to=ro,Vt=wn;function An(e){this.trie=e.trie,this.token_info_dictionary=e.token_info_dictionary,this.unknown_dictionary=e.unknown_dictionary}An.prototype.build=function(e){for(var n=new to,t=new Vt(e),a,f,l,h,y,w=0;w<t.length;w++){for(var I=t.slice(w),B=this.trie.commonPrefixSearch(I),D=0;D<B.length;D++){f=B[D].v,a=B[D].k;for(var x=this.token_info_dictionary.target_map[f],q=0;q<x.length;q++){var W=parseInt(x[q]);l=this.token_info_dictionary.dictionary.getShort(W),h=this.token_info_dictionary.dictionary.getShort(W+2),y=this.token_info_dictionary.dictionary.getShort(W+4),n.append(new gn(W,y,w+1,a.length,"KNOWN",l,h,a))}}var Q=new Vt(I),_r=new Vt(Q.charAt(0)),Z=this.unknown_dictionary.lookup(_r.toString());if(B==null||B.length===0||Z.is_always_invoke===1){if(a=_r,Z.is_grouping===1&&1<Q.length)for(var p=1;p<Q.length;p++){var S=Q.charAt(p),k=this.unknown_dictionary.lookup(S);if(Z.class_name!==k.class_name)break;a+=S}for(var A=this.unknown_dictionary.target_map[Z.class_id],b=0;b<A.length;b++){var d=parseInt(A[b]);l=this.unknown_dictionary.dictionary.getShort(d),h=this.unknown_dictionary.dictionary.getShort(d+2),y=this.unknown_dictionary.dictionary.getShort(d+4),n.append(new gn(d,y,w+1,a.length,"UNKNOWN",l,h,a.toString()))}}}return n.appendEos(),n};var eo=An;function bt(e){this.connection_costs=e}bt.prototype.search=function(e){return e=this.forward(e),this.backward(e)};bt.prototype.forward=function(e){var n,t,a;for(n=1;n<=e.eos_pos;n++){var f=e.nodes_end_at[n];if(f!=null)for(t=0;t<f.length;t++){var l=f[t],h=Number.MAX_VALUE,y,w=e.nodes_end_at[l.start_pos-1];if(w!=null){for(a=0;a<w.length;a++){var I=w[a],B;l.left_id==null||I.right_id==null?(console.log("Left or right is null"),B=0):B=this.connection_costs.get(I.right_id,l.left_id);var D=I.shortest_cost+B+l.cost;D<h&&(y=I,h=D)}l.prev=y,l.shortest_cost=h}}}return e};bt.prototype.backward=function(e){var n=[],t=e.nodes_end_at[e.nodes_end_at.length-1][0],a=t.prev;if(a==null)return[];for(;a.type!=="BOS";){if(n.push(a),a.prev==null)return[];a=a.prev}return n.reverse()};var no=bt;function Ht(){}Ht.prototype.formatEntry=function(e,n,t,a){var f={};return f.word_id=e,f.word_type=t,f.word_position=n,f.surface_form=a[0],f.pos=a[1],f.pos_detail_1=a[2],f.pos_detail_2=a[3],f.pos_detail_3=a[4],f.conjugated_type=a[5],f.conjugated_form=a[6],f.basic_form=a[7],f.reading=a[8],f.pronunciation=a[9],f};Ht.prototype.formatUnknownEntry=function(e,n,t,a,f){var l={};return l.word_id=e,l.word_type=t,l.word_position=n,l.surface_form=f,l.pos=a[1],l.pos_detail_1=a[2],l.pos_detail_2=a[3],l.pos_detail_3=a[4],l.conjugated_type=a[5],l.conjugated_form=a[6],l.basic_form=a[7],l};var io=Ht,ao=eo,oo=no,uo=io,fo=/、|。/;function Er(e){this.token_info_dictionary=e.token_info_dictionary,this.unknown_dictionary=e.unknown_dictionary,this.viterbi_builder=new ao(e),this.viterbi_searcher=new oo(e.connection_costs),this.formatter=new uo}Er.splitByPunctuation=function(e){for(var n=[],t=e;t!=="";){var a=t.search(fo);if(a<0){n.push(t);break}n.push(t.substring(0,a+1)),t=t.substring(a+1)}return n};Er.prototype.tokenize=function(e){for(var n=Er.splitByPunctuation(e),t=[],a=0;a<n.length;a++){var f=n[a];this.tokenizeForSentence(f,t)}return t};Er.prototype.tokenizeForSentence=function(e,n){n==null&&(n=[]);var t=this.getLattice(e),a=this.viterbi_searcher.search(t),f=0;n.length>0&&(f=n[n.length-1].word_position);for(var l=0;l<a.length;l++){var h=a[l],y,w,I;h.type==="KNOWN"?(I=this.token_info_dictionary.getFeatures(h.name),I==null?w=[]:w=I.split(","),y=this.formatter.formatEntry(h.name,f+h.start_pos,h.type,w)):h.type==="UNKNOWN"?(I=this.unknown_dictionary.getFeatures(h.name),I==null?w=[]:w=I.split(","),y=this.formatter.formatUnknownEntry(h.name,f+h.start_pos,h.type,w,h.surface_form)):y=this.formatter.formatEntry(h.name,f+h.start_pos,h.type,[]),n.push(y)}return n};Er.prototype.getLattice=function(e){return this.viterbi_builder.build(e)};var so=Er;const co=Za(Xa);function lo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Cn={exports:{}},z=Cn.exports={},nr,ir;function Gt(){throw new Error("setTimeout has not been defined")}function qt(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?nr=setTimeout:nr=Gt}catch{nr=Gt}try{typeof clearTimeout=="function"?ir=clearTimeout:ir=qt}catch{ir=qt}})();function Tn(e){if(nr===setTimeout)return setTimeout(e,0);if((nr===Gt||!nr)&&setTimeout)return nr=setTimeout,setTimeout(e,0);try{return nr(e,0)}catch{try{return nr.call(null,e,0)}catch{return nr.call(this,e,0)}}}function ho(e){if(ir===clearTimeout)return clearTimeout(e);if((ir===qt||!ir)&&clearTimeout)return ir=clearTimeout,clearTimeout(e);try{return ir(e)}catch{try{return ir.call(null,e)}catch{return ir.call(this,e)}}}var ur=[],Fr=!1,yr,dt=-1;function vo(){!Fr||!yr||(Fr=!1,yr.length?ur=yr.concat(ur):dt=-1,ur.length&&Sn())}function Sn(){if(!Fr){var e=Tn(vo);Fr=!0;for(var n=ur.length;n;){for(yr=ur,ur=[];++dt<n;)yr&&yr[dt].run();dt=-1,n=ur.length}yr=null,Fr=!1,ho(e)}}z.nextTick=function(e){var n=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)n[t-1]=arguments[t];ur.push(new kn(e,n)),ur.length===1&&!Fr&&Tn(Sn)};function kn(e,n){this.fun=e,this.array=n}kn.prototype.run=function(){this.fun.apply(null,this.array)};z.title="browser";z.browser=!0;z.env={};z.argv=[];z.version="";z.versions={};function sr(){}z.on=sr;z.addListener=sr;z.once=sr;z.off=sr;z.removeListener=sr;z.removeAllListeners=sr;z.emit=sr;z.prependListener=sr;z.prependOnceListener=sr;z.listeners=function(e){return[]};z.binding=function(e){throw new Error("process.binding is not supported")};z.cwd=function(){return"/"};z.chdir=function(e){throw new Error("process.chdir is not supported")};z.umask=function(){return 0};var po=Cn.exports;const Gr=lo(po);function er(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function yn(e,n){for(var t="",a=0,f=-1,l=0,h,y=0;y<=e.length;++y){if(y<e.length)h=e.charCodeAt(y);else{if(h===47)break;h=47}if(h===47){if(!(f===y-1||l===1))if(f!==y-1&&l===2){if(t.length<2||a!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var w=t.lastIndexOf("/");if(w!==t.length-1){w===-1?(t="",a=0):(t=t.slice(0,w),a=t.length-1-t.lastIndexOf("/")),f=y,l=0;continue}}else if(t.length===2||t.length===1){t="",a=0,f=y,l=0;continue}}n&&(t.length>0?t+="/..":t="..",a=2)}else t.length>0?t+="/"+e.slice(f+1,y):t=e.slice(f+1,y),a=y-f-1;f=y,l=0}else h===46&&l!==-1?++l:l=-1}return t}function go(e,n){var t=n.dir||n.root,a=n.base||(n.name||"")+(n.ext||"");return t?t===n.root?t+a:t+e+a:a}var Dr={resolve:function(){for(var n="",t=!1,a,f=arguments.length-1;f>=-1&&!t;f--){var l;f>=0?l=arguments[f]:(a===void 0&&(a=Gr.cwd()),l=a),er(l),l.length!==0&&(n=l+"/"+n,t=l.charCodeAt(0)===47)}return n=yn(n,!t),t?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(n){if(er(n),n.length===0)return".";var t=n.charCodeAt(0)===47,a=n.charCodeAt(n.length-1)===47;return n=yn(n,!t),n.length===0&&!t&&(n="."),n.length>0&&a&&(n+="/"),t?"/"+n:n},isAbsolute:function(n){return er(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,t=0;t<arguments.length;++t){var a=arguments[t];er(a),a.length>0&&(n===void 0?n=a:n+="/"+a)}return n===void 0?".":Dr.normalize(n)},relative:function(n,t){if(er(n),er(t),n===t||(n=Dr.resolve(n),t=Dr.resolve(t),n===t))return"";for(var a=1;a<n.length&&n.charCodeAt(a)===47;++a);for(var f=n.length,l=f-a,h=1;h<t.length&&t.charCodeAt(h)===47;++h);for(var y=t.length,w=y-h,I=l<w?l:w,B=-1,D=0;D<=I;++D){if(D===I){if(w>I){if(t.charCodeAt(h+D)===47)return t.slice(h+D+1);if(D===0)return t.slice(h+D)}else l>I&&(n.charCodeAt(a+D)===47?B=D:D===0&&(B=0));break}var x=n.charCodeAt(a+D),q=t.charCodeAt(h+D);if(x!==q)break;x===47&&(B=D)}var W="";for(D=a+B+1;D<=f;++D)(D===f||n.charCodeAt(D)===47)&&(W.length===0?W+="..":W+="/..");return W.length>0?W+t.slice(h+B):(h+=B,t.charCodeAt(h)===47&&++h,t.slice(h))},_makeLong:function(n){return n},dirname:function(n){if(er(n),n.length===0)return".";for(var t=n.charCodeAt(0),a=t===47,f=-1,l=!0,h=n.length-1;h>=1;--h)if(t=n.charCodeAt(h),t===47){if(!l){f=h;break}}else l=!1;return f===-1?a?"/":".":a&&f===1?"//":n.slice(0,f)},basename:function(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');er(n);var a=0,f=-1,l=!0,h;if(t!==void 0&&t.length>0&&t.length<=n.length){if(t.length===n.length&&t===n)return"";var y=t.length-1,w=-1;for(h=n.length-1;h>=0;--h){var I=n.charCodeAt(h);if(I===47){if(!l){a=h+1;break}}else w===-1&&(l=!1,w=h+1),y>=0&&(I===t.charCodeAt(y)?--y===-1&&(f=h):(y=-1,f=w))}return a===f?f=w:f===-1&&(f=n.length),n.slice(a,f)}else{for(h=n.length-1;h>=0;--h)if(n.charCodeAt(h)===47){if(!l){a=h+1;break}}else f===-1&&(l=!1,f=h+1);return f===-1?"":n.slice(a,f)}},extname:function(n){er(n);for(var t=-1,a=0,f=-1,l=!0,h=0,y=n.length-1;y>=0;--y){var w=n.charCodeAt(y);if(w===47){if(!l){a=y+1;break}continue}f===-1&&(l=!1,f=y+1),w===46?t===-1?t=y:h!==1&&(h=1):t!==-1&&(h=-1)}return t===-1||f===-1||h===0||h===1&&t===f-1&&t===a+1?"":n.slice(t,f)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return go("/",n)},parse:function(n){er(n);var t={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return t;var a=n.charCodeAt(0),f=a===47,l;f?(t.root="/",l=1):l=0;for(var h=-1,y=0,w=-1,I=!0,B=n.length-1,D=0;B>=l;--B){if(a=n.charCodeAt(B),a===47){if(!I){y=B+1;break}continue}w===-1&&(I=!1,w=B+1),a===46?h===-1?h=B:D!==1&&(D=1):h!==-1&&(D=-1)}return h===-1||w===-1||D===0||D===1&&h===w-1&&h===y+1?w!==-1&&(y===0&&f?t.base=t.name=n.slice(1,w):t.base=t.name=n.slice(y,w)):(y===0&&f?(t.name=n.slice(1,h),t.base=n.slice(1,w)):(t.name=n.slice(y,h),t.base=n.slice(y,w)),t.ext=n.slice(h,w)),y>0?t.dir=n.slice(0,y-1):f&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Dr.posix=Dr;var Yt=Dr;const yo=mn(Yt),nu=Ja({__proto__:null,default:yo},[Yt]);var _t={exports:{}};_t.exports;(function(e,n){(function(t,a){a(n)})(Vr,function(t){function a(r,i){i=i|0;for(var o=Math.max(r.length-i,0),u=Array(o),s=0;s<o;s++)u[s]=r[i+s];return u}var f=function(r){var i=a(arguments,1);return function(){var o=a(arguments);return r.apply(null,i.concat(o))}},l=function(r){return function(){var i=a(arguments),o=i.pop();r.call(this,i,o)}};function h(r){var i=typeof r;return r!=null&&(i=="object"||i=="function")}var y=typeof setImmediate=="function"&&setImmediate,w=typeof Gr=="object"&&typeof Gr.nextTick=="function";function I(r){setTimeout(r,0)}function B(r){return function(i){var o=a(arguments,1);r(function(){i.apply(null,o)})}}var D;y?D=setImmediate:w?D=Gr.nextTick:D=I;var x=B(D);function q(r){return l(function(i,o){var u;try{u=r.apply(this,i)}catch(s){return o(s)}h(u)&&typeof u.then=="function"?u.then(function(s){W(o,null,s)},function(s){W(o,s.message?s:new Error(s))}):o(null,u)})}function W(r,i,o){try{r(i,o)}catch(u){x(Q,u)}}function Q(r){throw r}var _r=typeof Symbol=="function";function Z(r){return _r&&r[Symbol.toStringTag]==="AsyncFunction"}function p(r){return Z(r)?q(r):r}function S(r){return function(i){var o=a(arguments,1),u=l(function(s,c){var v=this;return r(i,function(g,m){p(g).apply(v,s.concat(m))},c)});return o.length?u.apply(this,o):u}}var k=typeof Vr=="object"&&Vr&&Vr.Object===Object&&Vr,A=typeof self=="object"&&self&&self.Object===Object&&self,b=k||A||Function("return this")(),d=b.Symbol,C=Object.prototype,T=C.hasOwnProperty,E=C.toString,j=d?d.toStringTag:void 0;function N(r){var i=T.call(r,j),o=r[j];try{r[j]=void 0;var u=!0}catch{}var s=E.call(r);return u&&(i?r[j]=o:delete r[j]),s}var ar=Object.prototype,At=ar.toString;function Rn(r){return At.call(r)}var zn="[object Null]",Nn="[object Undefined]",te=d?d.toStringTag:void 0;function Kr(r){return r==null?r===void 0?Nn:zn:te&&te in Object(r)?N(r):Rn(r)}var Vn="[object AsyncFunction]",Gn="[object Function]",qn="[object GeneratorFunction]",Kn="[object Proxy]";function Wn(r){if(!h(r))return!1;var i=Kr(r);return i==Gn||i==qn||i==Vn||i==Kn}var Hn=9007199254740991;function ee(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Hn}function jr(r){return r!=null&&ee(r.length)&&!Wn(r)}var Ct={};function O(){}function hr(r){return function(){if(r!==null){var i=r;r=null,i.apply(this,arguments)}}}var Tt=typeof Symbol=="function"&&Symbol.iterator,Yn=function(r){return Tt&&r[Tt]&&r[Tt]()};function Qn(r,i){for(var o=-1,u=Array(r);++o<r;)u[o]=i(o);return u}function Wr(r){return r!=null&&typeof r=="object"}var Xn="[object Arguments]";function ne(r){return Wr(r)&&Kr(r)==Xn}var ie=Object.prototype,Jn=ie.hasOwnProperty,Zn=ie.propertyIsEnumerable,$n=ne(function(){return arguments}())?ne:function(r){return Wr(r)&&Jn.call(r,"callee")&&!Zn.call(r,"callee")},X=Array.isArray;function ri(){return!1}var ae=typeof t=="object"&&t&&!t.nodeType&&t,oe=ae&&!0&&e&&!e.nodeType&&e,ti=oe&&oe.exports===ae,ue=ti?b.Buffer:void 0,ei=ue?ue.isBuffer:void 0,ni=ei||ri,ii=9007199254740991,ai=/^(?:0|[1-9]\d*)$/;function oi(r,i){var o=typeof r;return i=i??ii,!!i&&(o=="number"||o!="symbol"&&ai.test(r))&&r>-1&&r%1==0&&r<i}var ui="[object Arguments]",fi="[object Array]",si="[object Boolean]",ci="[object Date]",li="[object Error]",hi="[object Function]",vi="[object Map]",pi="[object Number]",gi="[object Object]",yi="[object RegExp]",di="[object Set]",mi="[object String]",_i="[object WeakMap]",bi="[object ArrayBuffer]",wi="[object DataView]",Ai="[object Float32Array]",Ci="[object Float64Array]",Ti="[object Int8Array]",Si="[object Int16Array]",ki="[object Int32Array]",Fi="[object Uint8Array]",Di="[object Uint8ClampedArray]",Ei="[object Uint16Array]",Ii="[object Uint32Array]",U={};U[Ai]=U[Ci]=U[Ti]=U[Si]=U[ki]=U[Fi]=U[Di]=U[Ei]=U[Ii]=!0,U[ui]=U[fi]=U[bi]=U[si]=U[wi]=U[ci]=U[li]=U[hi]=U[vi]=U[pi]=U[gi]=U[yi]=U[di]=U[mi]=U[_i]=!1;function Li(r){return Wr(r)&&ee(r.length)&&!!U[Kr(r)]}function ji(r){return function(i){return r(i)}}var fe=typeof t=="object"&&t&&!t.nodeType&&t,Br=fe&&!0&&e&&!e.nodeType&&e,Bi=Br&&Br.exports===fe,St=Bi&&k.process,se=function(){try{var r=Br&&Br.require&&Br.require("util").types;return r||St&&St.binding&&St.binding("util")}catch{}}(),ce=se&&se.isTypedArray,Oi=ce?ji(ce):Li,xi=Object.prototype,Ui=xi.hasOwnProperty;function Pi(r,i){var o=X(r),u=!o&&$n(r),s=!o&&!u&&ni(r),c=!o&&!u&&!s&&Oi(r),v=o||u||s||c,g=v?Qn(r.length,String):[],m=g.length;for(var F in r)Ui.call(r,F)&&!(v&&(F=="length"||s&&(F=="offset"||F=="parent")||c&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||oi(F,m)))&&g.push(F);return g}var Mi=Object.prototype;function Ri(r){var i=r&&r.constructor,o=typeof i=="function"&&i.prototype||Mi;return r===o}function zi(r,i){return function(o){return r(i(o))}}var Ni=zi(Object.keys,Object),Vi=Object.prototype,Gi=Vi.hasOwnProperty;function qi(r){if(!Ri(r))return Ni(r);var i=[];for(var o in Object(r))Gi.call(r,o)&&o!="constructor"&&i.push(o);return i}function kt(r){return jr(r)?Pi(r):qi(r)}function Ki(r){var i=-1,o=r.length;return function(){return++i<o?{value:r[i],key:i}:null}}function Wi(r){var i=-1;return function(){var u=r.next();return u.done?null:(i++,{value:u.value,key:i})}}function Hi(r){var i=kt(r),o=-1,u=i.length;return function s(){var c=i[++o];return c==="__proto__"?s():o<u?{value:r[c],key:c}:null}}function Yi(r){if(jr(r))return Ki(r);var i=Yn(r);return i?Wi(i):Hi(r)}function $(r){return function(){if(r===null)throw new Error("Callback was already called.");var i=r;r=null,i.apply(this,arguments)}}function Hr(r){return function(i,o,u){if(u=hr(u||O),r<=0||!i)return u(null);var s=Yi(i),c=!1,v=0,g=!1;function m(_,L){if(v-=1,_)c=!0,u(_);else{if(L===Ct||c&&v<=0)return c=!0,u(null);g||F()}}function F(){for(g=!0;v<r&&!c;){var _=s();if(_===null){c=!0,v<=0&&u(null);return}v+=1,o(_.value,_.key,$(m))}g=!1}F()}}function gr(r,i,o,u){Hr(i)(r,p(o),u)}function G(r,i){return function(o,u,s){return r(o,i,u,s)}}function Qi(r,i,o){o=hr(o||O);var u=0,s=0,c=r.length;c===0&&o(null);function v(g,m){g?o(g):(++s===c||m===Ct)&&o(null)}for(;u<c;u++)i(r[u],u,$(v))}var Xi=G(gr,1/0),vr=function(r,i,o){var u=jr(r)?Qi:Xi;u(r,p(i),o)};function br(r){return function(i,o,u){return r(vr,i,p(o),u)}}function le(r,i,o,u){u=u||O,i=i||[];var s=[],c=0,v=p(o);r(i,function(g,m,F){var _=c++;v(g,function(L,P){s[_]=P,F(L)})},function(g){u(g,s)})}var Yr=br(le),he=S(Yr);function wr(r){return function(i,o,u,s){return r(Hr(o),i,p(u),s)}}var Ar=wr(le),Ft=G(Ar,1),ve=S(Ft);function Qr(r,i){for(var o=-1,u=r==null?0:r.length;++o<u&&i(r[o],o,r)!==!1;);return r}function Ji(r){return function(i,o,u){for(var s=-1,c=Object(i),v=u(i),g=v.length;g--;){var m=v[++s];if(o(c[m],m,c)===!1)break}return i}}var Zi=Ji();function Or(r,i){return r&&Zi(r,i,kt)}function $i(r,i,o,u){for(var s=r.length,c=o+-1;++c<s;)if(i(r[c],c,r))return c;return-1}function ra(r){return r!==r}function ta(r,i,o){for(var u=o-1,s=r.length;++u<s;)if(r[u]===i)return u;return-1}function Xr(r,i,o){return i===i?ta(r,i,o):$i(r,ra,o)}var Dt=function(r,i,o){typeof i=="function"&&(o=i,i=null),o=hr(o||O);var u=kt(r),s=u.length;if(!s)return o(null);i||(i=s);var c={},v=0,g=!1,m=Object.create(null),F=[],_=[],L={};Or(r,function(M,R){if(!X(M)){P(R,[M]),_.push(R);return}var V=M.slice(0,M.length-1),or=V.length;if(or===0){P(R,M),_.push(R);return}L[R]=or,Qr(V,function(kr){if(!r[kr])throw new Error("async.auto task `"+R+"` has a non-existent dependency `"+kr+"` in "+V.join(", "));rr(kr,function(){or--,or===0&&P(R,M)})})}),Wa(),K();function P(M,R){F.push(function(){tr(M,R)})}function K(){if(F.length===0&&v===0)return o(null,c);for(;F.length&&v<i;){var M=F.shift();M()}}function rr(M,R){var V=m[M];V||(V=m[M]=[]),V.push(R)}function Y(M){var R=m[M]||[];Qr(R,function(V){V()}),K()}function tr(M,R){if(!g){var V=$(function(kr,zt){if(v--,arguments.length>2&&(zt=a(arguments,1)),kr){var Nt={};Or(c,function(Ya,Qa){Nt[Qa]=Ya}),Nt[M]=zt,g=!0,m=Object.create(null),o(kr,Nt)}else c[M]=zt,Y(M)});v++;var or=p(R[R.length-1]);R.length>1?or(c,V):or(V)}}function Wa(){for(var M,R=0;_.length;)M=_.pop(),R++,Qr(Ha(M),function(V){--L[V]===0&&_.push(V)});if(R!==s)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function Ha(M){var R=[];return Or(r,function(V,or){X(V)&&Xr(V,M,0)>=0&&R.push(or)}),R}};function Cr(r,i){for(var o=-1,u=r==null?0:r.length,s=Array(u);++o<u;)s[o]=i(r[o],o,r);return s}var ea="[object Symbol]";function na(r){return typeof r=="symbol"||Wr(r)&&Kr(r)==ea}var pe=d?d.prototype:void 0,ge=pe?pe.toString:void 0;function Et(r){if(typeof r=="string")return r;if(X(r))return Cr(r,Et)+"";if(na(r))return ge?ge.call(r):"";var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}function ia(r,i,o){var u=-1,s=r.length;i<0&&(i=-i>s?0:s+i),o=o>s?s:o,o<0&&(o+=s),s=i>o?0:o-i>>>0,i>>>=0;for(var c=Array(s);++u<s;)c[u]=r[u+i];return c}function aa(r,i,o){var u=r.length;return o=o===void 0?u:o,!i&&o>=u?r:ia(r,i,o)}function oa(r,i){for(var o=r.length;o--&&Xr(i,r[o],0)>-1;);return o}function ua(r,i){for(var o=-1,u=r.length;++o<u&&Xr(i,r[o],0)>-1;);return o}function fa(r){return r.split("")}var sa="\\ud800-\\udfff",ca="\\u0300-\\u036f",la="\\ufe20-\\ufe2f",ha="\\u20d0-\\u20ff",va=ca+la+ha,pa="\\ufe0e\\ufe0f",ga="\\u200d",ya=RegExp("["+ga+sa+va+pa+"]");function da(r){return ya.test(r)}var ye="\\ud800-\\udfff",ma="\\u0300-\\u036f",_a="\\ufe20-\\ufe2f",ba="\\u20d0-\\u20ff",wa=ma+_a+ba,Aa="\\ufe0e\\ufe0f",Ca="["+ye+"]",It="["+wa+"]",Lt="\\ud83c[\\udffb-\\udfff]",Ta="(?:"+It+"|"+Lt+")",de="[^"+ye+"]",me="(?:\\ud83c[\\udde6-\\uddff]){2}",_e="[\\ud800-\\udbff][\\udc00-\\udfff]",Sa="\\u200d",be=Ta+"?",we="["+Aa+"]?",ka="(?:"+Sa+"(?:"+[de,me,_e].join("|")+")"+we+be+")*",Fa=we+be+ka,Da="(?:"+[de+It+"?",It,me,_e,Ca].join("|")+")",Ea=RegExp(Lt+"(?="+Lt+")|"+Da+Fa,"g");function Ia(r){return r.match(Ea)||[]}function Ae(r){return da(r)?Ia(r):fa(r)}function La(r){return r==null?"":Et(r)}var ja=/^\s+|\s+$/g;function Ba(r,i,o){if(r=La(r),r&&i===void 0)return r.replace(ja,"");if(!r||!(i=Et(i)))return r;var u=Ae(r),s=Ae(i),c=ua(u,s),v=oa(u,s)+1;return aa(u,c,v).join("")}var Oa=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,xa=/,/,Ua=/(=.+)?(\s*)$/,Pa=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg;function Ma(r){return r=r.toString().replace(Pa,""),r=r.match(Oa)[2].replace(" ",""),r=r?r.split(xa):[],r=r.map(function(i){return Ba(i.replace(Ua,""))}),r}function Ce(r,i){var o={};Or(r,function(u,s){var c,v=Z(u),g=!v&&u.length===1||v&&u.length===0;if(X(u))c=u.slice(0,-1),u=u[u.length-1],o[s]=c.concat(c.length>0?m:u);else if(g)o[s]=u;else{if(c=Ma(u),u.length===0&&!v&&c.length===0)throw new Error("autoInject task functions require explicit parameters.");v||c.pop(),o[s]=c.concat(m)}function m(F,_){var L=Cr(c,function(P){return F[P]});L.push(_),p(u).apply(null,L)}}),Dt(o,i)}function J(){this.head=this.tail=null,this.length=0}function Te(r,i){r.length=1,r.head=r.tail=i}J.prototype.removeLink=function(r){return r.prev?r.prev.next=r.next:this.head=r.next,r.next?r.next.prev=r.prev:this.tail=r.prev,r.prev=r.next=null,this.length-=1,r},J.prototype.empty=function(){for(;this.head;)this.shift();return this},J.prototype.insertAfter=function(r,i){i.prev=r,i.next=r.next,r.next?r.next.prev=i:this.tail=i,r.next=i,this.length+=1},J.prototype.insertBefore=function(r,i){i.prev=r.prev,i.next=r,r.prev?r.prev.next=i:this.head=i,r.prev=i,this.length+=1},J.prototype.unshift=function(r){this.head?this.insertBefore(this.head,r):Te(this,r)},J.prototype.push=function(r){this.tail?this.insertAfter(this.tail,r):Te(this,r)},J.prototype.shift=function(){return this.head&&this.removeLink(this.head)},J.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},J.prototype.toArray=function(){for(var r=Array(this.length),i=this.head,o=0;o<this.length;o++)r[o]=i.data,i=i.next;return r},J.prototype.remove=function(r){for(var i=this.head;i;){var o=i.next;r(i)&&this.removeLink(i),i=o}return this};function Se(r,i,o){if(i==null)i=1;else if(i===0)throw new Error("Concurrency must not be zero");var u=p(r),s=0,c=[],v=!1;function g(L,P,K){if(K!=null&&typeof K!="function")throw new Error("task callback must be a function");if(_.started=!0,X(L)||(L=[L]),L.length===0&&_.idle())return x(function(){_.drain()});for(var rr=0,Y=L.length;rr<Y;rr++){var tr={data:L[rr],callback:K||O};P?_._tasks.unshift(tr):_._tasks.push(tr)}v||(v=!0,x(function(){v=!1,_.process()}))}function m(L){return function(P){s-=1;for(var K=0,rr=L.length;K<rr;K++){var Y=L[K],tr=Xr(c,Y,0);tr===0?c.shift():tr>0&&c.splice(tr,1),Y.callback.apply(Y,arguments),P!=null&&_.error(P,Y.data)}s<=_.concurrency-_.buffer&&_.unsaturated(),_.idle()&&_.drain(),_.process()}}var F=!1,_={_tasks:new J,concurrency:i,payload:o,saturated:O,unsaturated:O,buffer:i/4,empty:O,drain:O,error:O,started:!1,paused:!1,push:function(L,P){g(L,!1,P)},kill:function(){_.drain=O,_._tasks.empty()},unshift:function(L,P){g(L,!0,P)},remove:function(L){_._tasks.remove(L)},process:function(){if(!F){for(F=!0;!_.paused&&s<_.concurrency&&_._tasks.length;){var L=[],P=[],K=_._tasks.length;_.payload&&(K=Math.min(K,_.payload));for(var rr=0;rr<K;rr++){var Y=_._tasks.shift();L.push(Y),c.push(Y),P.push(Y.data)}s+=1,_._tasks.length===0&&_.empty(),s===_.concurrency&&_.saturated();var tr=$(m(L));u(P,tr)}F=!1}},length:function(){return _._tasks.length},running:function(){return s},workersList:function(){return c},idle:function(){return _._tasks.length+s===0},pause:function(){_.paused=!0},resume:function(){_.paused!==!1&&(_.paused=!1,x(_.process))}};return _}function ke(r,i){return Se(r,1,i)}var Tr=G(gr,1);function pr(r,i,o,u){u=hr(u||O);var s=p(o);Tr(r,function(c,v,g){s(i,c,function(m,F){i=F,g(m)})},function(c){u(c,i)})}function jt(){var r=Cr(arguments,p);return function(){var i=a(arguments),o=this,u=i[i.length-1];typeof u=="function"?i.pop():u=O,pr(r,i,function(s,c,v){c.apply(o,s.concat(function(g){var m=a(arguments,1);v(g,m)}))},function(s,c){u.apply(o,[s].concat(c))})}}var Fe=function(){return jt.apply(null,a(arguments).reverse())},Ra=Array.prototype.concat,Jr=function(r,i,o,u){u=u||O;var s=p(o);Ar(r,i,function(c,v){s(c,function(g){return g?v(g):v(null,a(arguments,1))})},function(c,v){for(var g=[],m=0;m<v.length;m++)v[m]&&(g=Ra.apply(g,v[m]));return u(c,g)})},De=G(Jr,1/0),Ee=G(Jr,1),Ie=function(){var r=a(arguments),i=[null].concat(r);return function(){var o=arguments[arguments.length-1];return o.apply(this,i)}};function xr(r){return r}function Sr(r,i){return function(o,u,s,c){c=c||O;var v=!1,g;o(u,function(m,F,_){s(m,function(L,P){L?_(L):r(P)&&!g?(v=!0,g=i(!0,m),_(null,Ct)):_()})},function(m){m?c(m):c(null,v?g:i(!1))})}}function Le(r,i){return i}var Zr=br(Sr(xr,Le)),Ur=wr(Sr(xr,Le)),$r=G(Ur,1);function je(r){return function(i){var o=a(arguments,1);o.push(function(u){var s=a(arguments,1);typeof console=="object"&&(u?console.error&&console.error(u):console[r]&&Qr(s,function(c){console[r](c)}))}),p(i).apply(null,o)}}var Be=je("dir");function Oe(r,i,o){o=$(o||O);var u=p(r),s=p(i);function c(g){if(g)return o(g);var m=a(arguments,1);m.push(v),s.apply(this,m)}function v(g,m){if(g)return o(g);if(!m)return o(null);u(c)}v(null,!0)}function Bt(r,i,o){o=$(o||O);var u=p(r),s=function(c){if(c)return o(c);var v=a(arguments,1);if(i.apply(this,v))return u(s);o.apply(null,[null].concat(v))};u(s)}function xe(r,i,o){Bt(r,function(){return!i.apply(this,arguments)},o)}function Ue(r,i,o){o=$(o||O);var u=p(i),s=p(r);function c(g){if(g)return o(g);s(v)}function v(g,m){if(g)return o(g);if(!m)return o(null);u(c)}s(v)}function Pe(r){return function(i,o,u){return r(i,u)}}function rt(r,i,o){vr(r,Pe(p(i)),o)}function Pr(r,i,o,u){Hr(i)(r,Pe(p(o)),u)}var Mr=G(Pr,1);function Ot(r){return Z(r)?r:l(function(i,o){var u=!0;i.push(function(){var s=arguments;u?x(function(){o.apply(null,s)}):o.apply(null,s)}),r.apply(this,i),u=!1})}function tt(r){return!r}var et=br(Sr(tt,tt)),Rr=wr(Sr(tt,tt)),nt=G(Rr,1);function Me(r){return function(i){return i==null?void 0:i[r]}}function za(r,i,o,u){var s=new Array(i.length);r(i,function(c,v,g){o(c,function(m,F){s[v]=!!F,g(m)})},function(c){if(c)return u(c);for(var v=[],g=0;g<i.length;g++)s[g]&&v.push(i[g]);u(null,v)})}function Na(r,i,o,u){var s=[];r(i,function(c,v,g){o(c,function(m,F){m?g(m):(F&&s.push({index:v,value:c}),g())})},function(c){c?u(c):u(null,Cr(s.sort(function(v,g){return v.index-g.index}),Me("value")))})}function xt(r,i,o,u){var s=jr(i)?za:Na;s(r,i,p(o),u||O)}var it=br(xt),zr=wr(xt),at=G(zr,1);function Re(r,i){var o=$(i||O),u=p(Ot(r));function s(c){if(c)return o(c);u(s)}s()}var ot=function(r,i,o,u){u=u||O;var s=p(o);Ar(r,i,function(c,v){s(c,function(g,m){return g?v(g):v(null,{key:m,val:c})})},function(c,v){for(var g={},m=Object.prototype.hasOwnProperty,F=0;F<v.length;F++)if(v[F]){var _=v[F].key,L=v[F].val;m.call(g,_)?g[_].push(L):g[_]=[L]}return u(c,g)})},ze=G(ot,1/0),Ne=G(ot,1),Ve=je("log");function ut(r,i,o,u){u=hr(u||O);var s={},c=p(o);gr(r,i,function(v,g,m){c(v,g,function(F,_){if(F)return m(F);s[g]=_,m()})},function(v){u(v,s)})}var Ge=G(ut,1/0),qe=G(ut,1);function Ke(r,i){return i in r}function We(r,i){var o=Object.create(null),u=Object.create(null);i=i||xr;var s=p(r),c=l(function(g,m){var F=i.apply(null,g);Ke(o,F)?x(function(){m.apply(null,o[F])}):Ke(u,F)?u[F].push(m):(u[F]=[m],s.apply(null,g.concat(function(){var _=a(arguments);o[F]=_;var L=u[F];delete u[F];for(var P=0,K=L.length;P<K;P++)L[P].apply(null,_)})))});return c.memo=o,c.unmemoized=r,c}var ft;w?ft=Gr.nextTick:y?ft=setImmediate:ft=I;var He=B(ft);function Ut(r,i,o){o=o||O;var u=jr(i)?[]:{};r(i,function(s,c,v){p(s)(function(g,m){arguments.length>2&&(m=a(arguments,1)),u[c]=m,v(g)})},function(s){o(s,u)})}function Ye(r,i){Ut(vr,r,i)}function Qe(r,i,o){Ut(Hr(i),r,o)}var Pt=function(r,i){var o=p(r);return Se(function(u,s){o(u[0],s)},i,1)},Xe=function(r,i){var o=Pt(r,i);return o.push=function(u,s,c){if(c==null&&(c=O),typeof c!="function")throw new Error("task callback must be a function");if(o.started=!0,X(u)||(u=[u]),u.length===0)return x(function(){o.drain()});s=s||0;for(var v=o._tasks.head;v&&s>=v.priority;)v=v.next;for(var g=0,m=u.length;g<m;g++){var F={data:u[g],priority:s,callback:c};v?o._tasks.insertBefore(v,F):o._tasks.push(F)}x(o.process)},delete o.unshift,o};function Je(r,i){if(i=hr(i||O),!X(r))return i(new TypeError("First argument to race must be an array of functions"));if(!r.length)return i();for(var o=0,u=r.length;o<u;o++)p(r[o])(i)}function st(r,i,o,u){var s=a(r).reverse();pr(s,i,o,u)}function ct(r){var i=p(r);return l(function(u,s){return u.push(function(v,g){if(v)s(null,{error:v});else{var m;arguments.length<=2?m=g:m=a(arguments,1),s(null,{value:m})}}),i.apply(this,u)})}function Ze(r){var i;return X(r)?i=Cr(r,ct):(i={},Or(r,function(o,u){i[u]=ct.call(this,o)})),i}function $e(r,i,o,u){xt(r,i,function(s,c){o(s,function(v,g){c(v,!g)})},u)}var rn=br($e),Mt=wr($e),tn=G(Mt,1);function en(r){return function(){return r}}function lt(r,i,o){var u=5,s=0,c={times:u,intervalFunc:en(s)};function v(_,L){if(typeof L=="object")_.times=+L.times||u,_.intervalFunc=typeof L.interval=="function"?L.interval:en(+L.interval||s),_.errorFilter=L.errorFilter;else if(typeof L=="number"||typeof L=="string")_.times=+L||u;else throw new Error("Invalid arguments for async.retry")}if(arguments.length<3&&typeof r=="function"?(o=i||O,i=r):(v(c,r),o=o||O),typeof i!="function")throw new Error("Invalid arguments for async.retry");var g=p(i),m=1;function F(){g(function(_){_&&m++<c.times&&(typeof c.errorFilter!="function"||c.errorFilter(_))?setTimeout(F,c.intervalFunc(m)):o.apply(null,arguments)})}F()}var nn=function(r,i){i||(i=r,r=null);var o=p(i);return l(function(u,s){function c(v){o.apply(null,u.concat(v))}r?lt(r,c,s):lt(c,s)})};function an(r,i){Ut(Tr,r,i)}var ht=br(Sr(Boolean,xr)),Nr=wr(Sr(Boolean,xr)),vt=G(Nr,1);function on(r,i,o){var u=p(i);Yr(r,function(c,v){u(c,function(g,m){if(g)return v(g);v(null,{value:c,criteria:m})})},function(c,v){if(c)return o(c);o(null,Cr(v.sort(s),Me("value")))});function s(c,v){var g=c.criteria,m=v.criteria;return g<m?-1:g>m?1:0}}function un(r,i,o){var u=p(r);return l(function(s,c){var v=!1,g;function m(){var F=r.name||"anonymous",_=new Error('Callback function "'+F+'" timed out.');_.code="ETIMEDOUT",o&&(_.info=o),v=!0,c(_)}s.push(function(){v||(c.apply(null,arguments),clearTimeout(g))}),g=setTimeout(m,i),u.apply(null,s)})}var Va=Math.ceil,Ga=Math.max;function qa(r,i,o,u){for(var s=-1,c=Ga(Va((i-r)/o),0),v=Array(c);c--;)v[++s]=r,r+=o;return v}function pt(r,i,o,u){var s=p(o);Ar(qa(0,r,1),i,s,u)}var fn=G(pt,1/0),sn=G(pt,1);function cn(r,i,o,u){arguments.length<=3&&(u=o,o=i,i=X(r)?[]:{}),u=hr(u||O);var s=p(o);vr(r,function(c,v,g){s(i,c,v,g)},function(c){u(c,i)})}function ln(r,i){var o=null,u;i=i||O,Mr(r,function(s,c){p(s)(function(v,g){arguments.length>2?u=a(arguments,1):u=g,o=v,c(!v)})},function(){i(o,u)})}function hn(r){return function(){return(r.unmemoized||r).apply(null,arguments)}}function Rt(r,i,o){o=$(o||O);var u=p(i);if(!r())return o(null);var s=function(c){if(c)return o(c);if(r())return u(s);var v=a(arguments,1);o.apply(null,[null].concat(v))};u(s)}function vn(r,i,o){Rt(function(){return!r.apply(this,arguments)},i,o)}var pn=function(r,i){if(i=hr(i||O),!X(r))return i(new Error("First argument to waterfall must be an array of functions"));if(!r.length)return i();var o=0;function u(c){var v=p(r[o++]);c.push($(s)),v.apply(null,c)}function s(c){if(c||o===r.length)return i.apply(null,arguments);u(a(arguments,1))}u([])},Ka={apply:f,applyEach:he,applyEachSeries:ve,asyncify:q,auto:Dt,autoInject:Ce,cargo:ke,compose:Fe,concat:De,concatLimit:Jr,concatSeries:Ee,constant:Ie,detect:Zr,detectLimit:Ur,detectSeries:$r,dir:Be,doDuring:Oe,doUntil:xe,doWhilst:Bt,during:Ue,each:rt,eachLimit:Pr,eachOf:vr,eachOfLimit:gr,eachOfSeries:Tr,eachSeries:Mr,ensureAsync:Ot,every:et,everyLimit:Rr,everySeries:nt,filter:it,filterLimit:zr,filterSeries:at,forever:Re,groupBy:ze,groupByLimit:ot,groupBySeries:Ne,log:Ve,map:Yr,mapLimit:Ar,mapSeries:Ft,mapValues:Ge,mapValuesLimit:ut,mapValuesSeries:qe,memoize:We,nextTick:He,parallel:Ye,parallelLimit:Qe,priorityQueue:Xe,queue:Pt,race:Je,reduce:pr,reduceRight:st,reflect:ct,reflectAll:Ze,reject:rn,rejectLimit:Mt,rejectSeries:tn,retry:lt,retryable:nn,seq:jt,series:an,setImmediate:x,some:ht,someLimit:Nr,someSeries:vt,sortBy:on,timeout:un,times:fn,timesLimit:pt,timesSeries:sn,transform:cn,tryEach:ln,unmemoize:hn,until:vn,waterfall:pn,whilst:Rt,all:et,allLimit:Rr,allSeries:nt,any:ht,anyLimit:Nr,anySeries:vt,find:Zr,findLimit:Ur,findSeries:$r,forEach:rt,forEachSeries:Mr,forEachLimit:Pr,forEachOf:vr,forEachOfSeries:Tr,forEachOfLimit:gr,inject:pr,foldl:pr,foldr:st,select:it,selectLimit:zr,selectSeries:at,wrapSync:q};t.default=Ka,t.apply=f,t.applyEach=he,t.applyEachSeries=ve,t.asyncify=q,t.auto=Dt,t.autoInject=Ce,t.cargo=ke,t.compose=Fe,t.concat=De,t.concatLimit=Jr,t.concatSeries=Ee,t.constant=Ie,t.detect=Zr,t.detectLimit=Ur,t.detectSeries=$r,t.dir=Be,t.doDuring=Oe,t.doUntil=xe,t.doWhilst=Bt,t.during=Ue,t.each=rt,t.eachLimit=Pr,t.eachOf=vr,t.eachOfLimit=gr,t.eachOfSeries=Tr,t.eachSeries=Mr,t.ensureAsync=Ot,t.every=et,t.everyLimit=Rr,t.everySeries=nt,t.filter=it,t.filterLimit=zr,t.filterSeries=at,t.forever=Re,t.groupBy=ze,t.groupByLimit=ot,t.groupBySeries=Ne,t.log=Ve,t.map=Yr,t.mapLimit=Ar,t.mapSeries=Ft,t.mapValues=Ge,t.mapValuesLimit=ut,t.mapValuesSeries=qe,t.memoize=We,t.nextTick=He,t.parallel=Ye,t.parallelLimit=Qe,t.priorityQueue=Xe,t.queue=Pt,t.race=Je,t.reduce=pr,t.reduceRight=st,t.reflect=ct,t.reflectAll=Ze,t.reject=rn,t.rejectLimit=Mt,t.rejectSeries=tn,t.retry=lt,t.retryable=nn,t.seq=jt,t.series=an,t.setImmediate=x,t.some=ht,t.someLimit=Nr,t.someSeries=vt,t.sortBy=on,t.timeout=un,t.times=fn,t.timesLimit=pt,t.timesSeries=sn,t.transform=cn,t.tryEach=ln,t.unmemoize=hn,t.until=vn,t.waterfall=pn,t.whilst=Rt,t.all=et,t.allLimit=Rr,t.allSeries=nt,t.any=ht,t.anyLimit=Nr,t.anySeries=vt,t.find=Zr,t.findLimit=Ur,t.findSeries=$r,t.forEach=rt,t.forEachSeries=Mr,t.forEachLimit=Pr,t.forEachOf=vr,t.forEachOfSeries=Tr,t.forEachOfLimit=gr,t.inject=pr,t.foldl=pr,t.foldr=st,t.select=it,t.selectLimit=zr,t.selectSeries=at,t.wrapSync=q,Object.defineProperty(t,"__esModule",{value:!0})})})(_t,_t.exports);var mo=_t.exports,Fn={exports:{}};(function(e){(function(){var n="\0",t=0,a=0,f=-1,l=!0,h=!0,y=4,w=4,I=2,B=function(p){p==null&&(p=1024);var S=function(T,E,j){for(var N=E;N<j;N++)T[N]=-N+1;if(0<C.array[C.array.length-1]){for(var ar=C.array.length-2;0<C.array[ar];)ar--;T[E]=-ar}},k=function(T,E,j){for(var N=E;N<j;N++)T[N]=-N-1},A=function(T){var E=T*I,j=q(d.signed,d.bytes,E);S(j,d.array.length,E),j.set(d.array),d.array=null,d.array=j;var N=q(C.signed,C.bytes,E);k(N,C.array.length,E),N.set(C.array),C.array=null,C.array=N},b=a+1,d={signed:l,bytes:y,array:q(l,y,p)},C={signed:h,bytes:w,array:q(h,w,p)};return d.array[a]=1,C.array[a]=a,S(d.array,a+1,d.array.length),k(C.array,a+1,C.array.length),{getBaseBuffer:function(){return d.array},getCheckBuffer:function(){return C.array},loadBaseBuffer:function(T){return d.array=T,this},loadCheckBuffer:function(T){return C.array=T,this},size:function(){return Math.max(d.array.length,C.array.length)},getBase:function(T){return d.array.length-1<T?-T+1:d.array[T]},getCheck:function(T){return C.array.length-1<T?-T-1:C.array[T]},setBase:function(T,E){d.array.length-1<T&&A(T),d.array[T]=E},setCheck:function(T,E){C.array.length-1<T&&A(T),C.array[T]=E},setFirstUnusedNode:function(T){b=T},getFirstUnusedNode:function(){return b},shrink:function(){for(var T=this.size()-1;!(0<=C.array[T]);)T--;d.array=d.array.subarray(0,T+2),C.array=C.array.subarray(0,T+2)},calc:function(){for(var T=0,E=C.array.length,j=0;j<E;j++)C.array[j]<0&&T++;return{all:E,unused:T,efficiency:(E-T)/E}},dump:function(){var T="",E="",j;for(j=0;j<d.array.length;j++)T=T+" "+this.getBase(j);for(j=0;j<C.array.length;j++)E=E+" "+this.getCheck(j);return console.log("base:"+T),console.log("chck:"+E),"base:"+T+" chck:"+E}}};function D(p){this.bc=B(p),this.keys=[]}D.prototype.append=function(p,S){return this.keys.push({k:p,v:S}),this},D.prototype.build=function(p,S){if(p==null&&(p=this.keys),p==null)return new x(this.bc);S==null&&(S=!1);var k=p.map(function(A){return{k:Q(A.k+n),v:A.v}});return S?this.keys=k:this.keys=k.sort(function(A,b){for(var d=A.k,C=b.k,T=Math.min(d.length,C.length),E=0;E<T;E++)if(d[E]!==C[E])return d[E]-C[E];return d.length-C.length}),k=null,this._build(a,0,0,this.keys.length),new x(this.bc)},D.prototype._build=function(p,S,k,A){var b=this.getChildrenInfo(S,k,A),d=this.findAllocatableBase(b);this.setBC(p,b,d);for(var C=0;C<b.length;C=C+3){var T=b[C];if(T!==t){var E=b[C+1],j=b[C+2],N=d+T;this._build(N,S+1,E,j)}}},D.prototype.getChildrenInfo=function(p,S,k){var A=this.keys[S].k[p],b=0,d=new Int32Array(k*3);d[b++]=A,d[b++]=S;for(var C=S,T=S;C<S+k;C++){var E=this.keys[C].k[p];A!==E&&(d[b++]=C-T,d[b++]=E,d[b++]=C,A=E,T=C)}return d[b++]=C-T,d=d.subarray(0,b),d},D.prototype.setBC=function(p,S,k){var A=this.bc;A.setBase(p,k);var b;for(b=0;b<S.length;b=b+3){var d=S[b],C=k+d,T=-A.getBase(C),E=-A.getCheck(C);C!==A.getFirstUnusedNode()?A.setCheck(T,-E):A.setFirstUnusedNode(E),A.setBase(E,-T);var j=p;if(A.setCheck(C,j),d===t){var N=S[b+1],ar=this.keys[N].v;ar==null&&(ar=0);var At=-ar-1;A.setBase(C,At)}}},D.prototype.findAllocatableBase=function(p){for(var S=this.bc,k,A=S.getFirstUnusedNode();;){if(k=A-p[0],k<0){A=-S.getCheck(A);continue}for(var b=!0,d=0;d<p.length;d=d+3){var C=p[d],T=k+C;if(!this.isUnusedNode(T)){A=-S.getCheck(A),b=!1;break}}if(b)return k}},D.prototype.isUnusedNode=function(p){var S=this.bc,k=S.getCheck(p);return p===a?!1:k<0};function x(p){this.bc=p,this.bc.shrink()}x.prototype.contain=function(p){var S=this.bc;p+=n;for(var k=Q(p),A=a,b=f,d=0;d<k.length;d++){var C=k[d];if(b=this.traverse(A,C),b===f)return!1;if(S.getBase(b)<=0)return!0;A=b}return!1},x.prototype.lookup=function(p){p+=n;for(var S=Q(p),k=a,A=f,b=0;b<S.length;b++){var d=S[b];if(A=this.traverse(k,d),A===f)return f;k=A}var C=this.bc.getBase(A);return C<=0?-C-1:f},x.prototype.commonPrefixSearch=function(p){for(var S=Q(p),k=a,A=f,b=[],d=0;d<S.length;d++){var C=S[d];if(A=this.traverse(k,C),A!==f){k=A;var T=this.traverse(A,t);if(T!==f){var E=this.bc.getBase(T),j={};E<=0&&(j.v=-E-1),j.k=_r(W(S,0,d+1)),b.push(j)}continue}else break}return b},x.prototype.traverse=function(p,S){var k=this.bc.getBase(p)+S;return this.bc.getCheck(k)===p?k:f},x.prototype.size=function(){return this.bc.size()},x.prototype.calc=function(){return this.bc.calc()},x.prototype.dump=function(){return this.bc.dump()};var q=function(p,S,k){switch(S){case 1:return new Int8Array(k);case 2:return new Int16Array(k);case 4:return new Int32Array(k);default:throw new RangeError("Invalid newArray parameter element_bytes:"+S)}},W=function(p,S,k){var A=new ArrayBuffer(k),b=new Uint8Array(A,0,k),d=p.subarray(S,k);return b.set(d),b},Q=function(p){for(var S=new Uint8Array(new ArrayBuffer(p.length*4)),k=0,A=0;k<p.length;){var b,d=p.charCodeAt(k++);if(d>=55296&&d<=56319){var C=d,T=p.charCodeAt(k++);if(T>=56320&&T<=57343)b=(C-55296)*1024+65536+(T-56320);else return null}else b=d;b<128?S[A++]=b:b<2048?(S[A++]=b>>>6|192,S[A++]=b&63|128):b<65536?(S[A++]=b>>>12|224,S[A++]=b>>6&63|128,S[A++]=b&63|128):b<1<<21&&(S[A++]=b>>>18|240,S[A++]=b>>12&63|128,S[A++]=b>>6&63|128,S[A++]=b&63|128)}return S.subarray(0,A)},_r=function(p){for(var S="",k,A,b,d,C,T,E,j=0;j<p.length;)A=p[j++],A<128?k=A:A>>5===6?(b=p[j++],k=(A&31)<<6|b&63):A>>4===14?(b=p[j++],d=p[j++],k=(A&15)<<12|(b&63)<<6|d&63):(b=p[j++],d=p[j++],C=p[j++],k=(A&7)<<18|(b&63)<<12|(d&63)<<6|C&63),k<65536?S+=String.fromCharCode(k):(k-=65536,T=55296|k>>10,E=56320|k&1023,S+=String.fromCharCode(T,E));return S},Z={builder:function(p){return new D(p)},load:function(p,S){var k=B(0);return k.loadBaseBuffer(p),k.loadCheckBuffer(S),new x(k)}};e.exports=Z})()})(Fn);var Dn=Fn.exports,_o=function(e){for(var n=new Uint8Array(e.length*4),t=0,a=0;t<e.length;){var f,l=e.charCodeAt(t++);if(l>=55296&&l<=56319){var h=l,y=e.charCodeAt(t++);if(y>=56320&&y<=57343)f=(h-55296)*1024+65536+(y-56320);else return null}else f=l;f<128?n[a++]=f:f<2048?(n[a++]=f>>>6|192,n[a++]=f&63|128):f<65536?(n[a++]=f>>>12|224,n[a++]=f>>6&63|128,n[a++]=f&63|128):f<1<<21&&(n[a++]=f>>>18|240,n[a++]=f>>12&63|128,n[a++]=f>>6&63|128,n[a++]=f&63|128)}return n.subarray(0,a)},bo=function(e){for(var n="",t,a,f,l,h,y,w,I=0;I<e.length;)a=e[I++],a<128?t=a:a>>5===6?(f=e[I++],t=(a&31)<<6|f&63):a>>4===14?(f=e[I++],l=e[I++],t=(a&15)<<12|(f&63)<<6|l&63):(f=e[I++],l=e[I++],h=e[I++],t=(a&7)<<18|(f&63)<<12|(l&63)<<6|h&63),t<65536?n+=String.fromCharCode(t):(t-=65536,y=55296|t>>10,w=56320|t&1023,n+=String.fromCharCode(y,w));return n};function H(e){var n;if(e==null)n=1024*1024;else if(typeof e=="number")n=e;else if(e instanceof Uint8Array){this.buffer=e,this.position=0;return}else throw typeof e+" is invalid parameter type for ByteBuffer constructor";this.buffer=new Uint8Array(n),this.position=0}H.prototype.size=function(){return this.buffer.length};H.prototype.reallocate=function(){var e=new Uint8Array(this.buffer.length*2);e.set(this.buffer),this.buffer=e};H.prototype.shrink=function(){return this.buffer=this.buffer.subarray(0,this.position),this.buffer};H.prototype.put=function(e){this.buffer.length<this.position+1&&this.reallocate(),this.buffer[this.position++]=e};H.prototype.get=function(e){return e==null&&(e=this.position,this.position+=1),this.buffer.length<e+1?0:this.buffer[e]};H.prototype.putShort=function(e){if(65535<e)throw e+" is over short value";var n=255&e,t=(65280&e)>>8;this.put(n),this.put(t)};H.prototype.getShort=function(e){if(e==null&&(e=this.position,this.position+=2),this.buffer.length<e+2)return 0;var n=this.buffer[e],t=this.buffer[e+1],a=(t<<8)+n;return a&32768&&(a=-(a-1^65535)),a};H.prototype.putInt=function(e){if(4294967295<e)throw e+" is over integer value";var n=255&e,t=(65280&e)>>8,a=(16711680&e)>>16,f=(4278190080&e)>>24;this.put(n),this.put(t),this.put(a),this.put(f)};H.prototype.getInt=function(e){if(e==null&&(e=this.position,this.position+=4),this.buffer.length<e+4)return 0;var n=this.buffer[e],t=this.buffer[e+1],a=this.buffer[e+2],f=this.buffer[e+3];return(f<<24)+(a<<16)+(t<<8)+n};H.prototype.readInt=function(){var e=this.position;return this.position+=4,this.getInt(e)};H.prototype.putString=function(e){for(var n=_o(e),t=0;t<n.length;t++)this.put(n[t]);this.put(0)};H.prototype.getString=function(e){var n=[],t;for(e==null&&(e=this.position);!(this.buffer.length<e+1||(t=this.get(e++),t===0));)n.push(t);return this.position=e,bo(n)};var Qt=H,Ir=Qt;function cr(){this.dictionary=new Ir(10*1024*1024),this.target_map={},this.pos_buffer=new Ir(10*1024*1024)}cr.prototype.buildDictionary=function(e){for(var n={},t=0;t<e.length;t++){var a=e[t];if(!(a.length<4)){var f=a[0],l=a[1],h=a[2],y=a[3],w=a.slice(4).join(",");(!isFinite(l)||!isFinite(h)||!isFinite(y))&&console.log(a);var I=this.put(l,h,y,f,w);n[I]=f}}return this.dictionary.shrink(),this.pos_buffer.shrink(),n};cr.prototype.put=function(e,n,t,a,f){var l=this.dictionary.position,h=this.pos_buffer.position;return this.dictionary.putShort(e),this.dictionary.putShort(n),this.dictionary.putShort(t),this.dictionary.putInt(h),this.pos_buffer.putString(a+","+f),l};cr.prototype.addMapping=function(e,n){var t=this.target_map[e];t==null&&(t=[]),t.push(n),this.target_map[e]=t};cr.prototype.targetMapToBuffer=function(){var e=new Ir,n=Object.keys(this.target_map).length;e.putInt(n);for(var t in this.target_map){var a=this.target_map[t],f=a.length;e.putInt(parseInt(t)),e.putInt(f);for(var l=0;l<a.length;l++)e.putInt(a[l])}return e.shrink()};cr.prototype.loadDictionary=function(e){return this.dictionary=new Ir(e),this};cr.prototype.loadPosVector=function(e){return this.pos_buffer=new Ir(e),this};cr.prototype.loadTargetMap=function(e){var n=new Ir(e);for(n.position=0,this.target_map={},n.readInt();!(n.buffer.length<n.position+1);)for(var t=n.readInt(),a=n.readInt(),f=0;f<a;f++){var l=n.readInt();this.addMapping(t,l)}return this};cr.prototype.getFeatures=function(e){var n=parseInt(e);if(isNaN(n))return"";var t=this.dictionary.getInt(n+6);return this.pos_buffer.getString(t)};var Xt=cr;function wt(e,n){this.forward_dimension=e,this.backward_dimension=n,this.buffer=new Int16Array(e*n+2),this.buffer[0]=e,this.buffer[1]=n}wt.prototype.put=function(e,n,t){var a=e*this.backward_dimension+n+2;if(this.buffer.length<a+1)throw"ConnectionCosts buffer overflow";this.buffer[a]=t};wt.prototype.get=function(e,n){var t=e*this.backward_dimension+n+2;if(this.buffer.length<t+1)throw"ConnectionCosts buffer overflow";return this.buffer[t]};wt.prototype.loadConnectionCosts=function(e){this.forward_dimension=e[0],this.backward_dimension=e[1],this.buffer=e};var En=wt;function wo(e,n,t,a,f){this.class_id=e,this.class_name=n,this.is_always_invoke=t,this.is_grouping=a,this.max_length=f}var In=wo,Ln=Qt,Ao=In;function dr(){this.map=[],this.lookup_table={}}dr.load=function(e){for(var n=new dr,t=[],a=new Ln(e);a.position+1<a.size();){var f=t.length,l=a.get(),h=a.get(),y=a.getInt(),w=a.getString();t.push(new Ao(f,w,l,h,y))}return n.init(t),n};dr.prototype.init=function(e){if(e!=null)for(var n=0;n<e.length;n++){var t=e[n];this.map[n]=t,this.lookup_table[t.class_name]=n}};dr.prototype.getCharacterClass=function(e){return this.map[e]};dr.prototype.lookup=function(e){var n=this.lookup_table[e];return n??null};dr.prototype.toBuffer=function(){for(var e=new Ln,n=0;n<this.map.length;n++){var t=this.map[n];e.put(t.is_always_invoke),e.put(t.is_grouping),e.putInt(t.max_length),e.putString(t.class_name)}return e.shrink(),e.buffer};var jn=dr,Co=jn,To=In,So=wn,Kt="DEFAULT";function fr(){this.character_category_map=new Uint8Array(65536),this.compatible_category_map=new Uint32Array(65536),this.invoke_definition_map=null}fr.load=function(e,n,t){var a=new fr;return a.character_category_map=e,a.compatible_category_map=n,a.invoke_definition_map=Co.load(t),a};fr.parseCharCategory=function(e,n){var t=n[1],a=parseInt(n[2]),f=parseInt(n[3]),l=parseInt(n[4]);if(!isFinite(a)||a!==0&&a!==1)return console.log("char.def parse error. INVOKE is 0 or 1 in:"+a),null;if(!isFinite(f)||f!==0&&f!==1)return console.log("char.def parse error. GROUP is 0 or 1 in:"+f),null;if(!isFinite(l)||l<0)return console.log("char.def parse error. LENGTH is 1 to n:"+l),null;var h=a===1,y=f===1;return new To(e,t,h,y,l)};fr.parseCategoryMapping=function(e){var n=parseInt(e[1]),t=e[2],a=3<e.length?e.slice(3):[];return(!isFinite(n)||n<0||n>65535)&&console.log("char.def parse error. CODE is invalid:"+n),{start:n,default:t,compatible:a}};fr.parseRangeCategoryMapping=function(e){var n=parseInt(e[1]),t=parseInt(e[2]),a=e[3],f=4<e.length?e.slice(4):[];return(!isFinite(n)||n<0||n>65535)&&console.log("char.def parse error. CODE is invalid:"+n),(!isFinite(t)||t<0||t>65535)&&console.log("char.def parse error. CODE is invalid:"+t),{start:n,end:t,default:a,compatible:f}};fr.prototype.initCategoryMappings=function(e){var n;if(e!=null)for(var t=0;t<e.length;t++){var a=e[t],f=a.end||a.start;for(n=a.start;n<=f;n++){this.character_category_map[n]=this.invoke_definition_map.lookup(a.default);for(var l=0;l<a.compatible.length;l++){var h=this.compatible_category_map[n],y=a.compatible[l];if(y!=null){var w=this.invoke_definition_map.lookup(y);if(w!=null){var I=1<<w;h=h|I,this.compatible_category_map[n]=h}}}}}var B=this.invoke_definition_map.lookup(Kt);if(B!=null)for(n=0;n<this.character_category_map.length;n++)this.character_category_map[n]===0&&(this.character_category_map[n]=1<<B)};fr.prototype.lookupCompatibleCategory=function(e){var n=[],t=e.charCodeAt(0),a;if(t<this.compatible_category_map.length&&(a=this.compatible_category_map[t]),a==null||a===0)return n;for(var f=0;f<32;f++)if(a<<31-f>>>31===1){var l=this.invoke_definition_map.getCharacterClass(f);if(l==null)continue;n.push(l)}return n};fr.prototype.lookup=function(e){var n,t=e.charCodeAt(0);return So.isSurrogatePair(e)?n=this.invoke_definition_map.lookup(Kt):t<this.character_category_map.length&&(n=this.character_category_map[t]),n==null&&(n=this.invoke_definition_map.lookup(Kt)),this.invoke_definition_map.getCharacterClass(n)};var Bn=fr,ko=Xt,Fo=Bn,dn=Qt;function Lr(){this.dictionary=new dn(10*1024*1024),this.target_map={},this.pos_buffer=new dn(10*1024*1024),this.character_definition=null}Lr.prototype=Object.create(ko.prototype);Lr.prototype.characterDefinition=function(e){return this.character_definition=e,this};Lr.prototype.lookup=function(e){return this.character_definition.lookup(e)};Lr.prototype.lookupCompatibleCategory=function(e){return this.character_definition.lookupCompatibleCategory(e)};Lr.prototype.loadUnknownDictionaries=function(e,n,t,a,f,l){this.loadDictionary(e),this.loadPosVector(n),this.loadTargetMap(t),this.character_definition=Fo.load(a,f,l)};var On=Lr,xn=Dn,Do=Xt,Eo=En,Io=On;function qr(e,n,t,a){e!=null?this.trie=e:this.trie=xn.builder(0).build([{k:"",v:1}]),n!=null?this.token_info_dictionary=n:this.token_info_dictionary=new Do,t!=null?this.connection_costs=t:this.connection_costs=new Eo(0,0),a!=null?this.unknown_dictionary=a:this.unknown_dictionary=new Io}qr.prototype.loadTrie=function(e,n){return this.trie=xn.load(e,n),this};qr.prototype.loadTokenInfoDictionaries=function(e,n,t){return this.token_info_dictionary.loadDictionary(e),this.token_info_dictionary.loadPosVector(n),this.token_info_dictionary.loadTargetMap(t),this};qr.prototype.loadConnectionCosts=function(e){return this.connection_costs.loadConnectionCosts(e),this};qr.prototype.loadUnknownDictionaries=function(e,n,t,a,f,l){return this.unknown_dictionary.loadUnknownDictionaries(e,n,t,a,f,l),this};var Un=qr,gt=Yt,yt=mo,Lo=Un;function Jt(e){this.dic=new Lo,this.dic_path=e}Jt.prototype.loadArrayBuffer=function(e,n){throw new Error("DictionaryLoader#loadArrayBuffer should be overwrite")};Jt.prototype.load=function(e){var n=this.dic,t=this.dic_path,a=this.loadArrayBuffer;yt.parallel([function(f){yt.map(["base.dat.gz","check.dat.gz"],function(l,h){a(gt.join(t,l),function(y,w){if(y)return h(y);h(null,w)})},function(l,h){if(l)return f(l);var y=new Int32Array(h[0]),w=new Int32Array(h[1]);n.loadTrie(y,w),f(null)})},function(f){yt.map(["tid.dat.gz","tid_pos.dat.gz","tid_map.dat.gz"],function(l,h){a(gt.join(t,l),function(y,w){if(y)return h(y);h(null,w)})},function(l,h){if(l)return f(l);var y=new Uint8Array(h[0]),w=new Uint8Array(h[1]),I=new Uint8Array(h[2]);n.loadTokenInfoDictionaries(y,w,I),f(null)})},function(f){a(gt.join(t,"cc.dat.gz"),function(l,h){if(l)return f(l);var y=new Int16Array(h);n.loadConnectionCosts(y),f(null)})},function(f){yt.map(["unk.dat.gz","unk_pos.dat.gz","unk_map.dat.gz","unk_char.dat.gz","unk_compat.dat.gz","unk_invoke.dat.gz"],function(l,h){a(gt.join(t,l),function(y,w){if(y)return h(y);h(null,w)})},function(l,h){if(l)return f(l);var y=new Uint8Array(h[0]),w=new Uint8Array(h[1]),I=new Uint8Array(h[2]),B=new Uint8Array(h[3]),D=new Uint32Array(h[4]),x=new Uint8Array(h[5]);n.loadUnknownDictionaries(y,w,I,B,D,x),f(null)})}],function(f){e(f,n)})};var jo=Jt,Bo=co,Pn=jo;function Zt(e){Pn.apply(this,[e])}Zt.prototype=Object.create(Pn.prototype);Zt.prototype.loadArrayBuffer=function(e,n){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=function(){if(this.status>0&&this.status!==200){n(t.statusText,null);return}var a=this.response,f=new Bo.Zlib.Gunzip(new Uint8Array(a)),l=f.decompress();n(null,l.buffer)},t.onerror=function(a){n(a,null)},t.send()};var Oo=Zt,xo=so,Uo=Oo;function Mn(e){e.dicPath==null?this.dic_path="dict/":this.dic_path=e.dicPath}Mn.prototype.build=function(e){var n=new Uo(this.dic_path);n.load(function(t,a){e(t,new xo(a))})};var Po=Mn,Mo=En;function $t(){this.lines=0,this.connection_cost=null}$t.prototype.putLine=function(e){if(this.lines===0){var n=e.split(" "),t=n[0],a=n[1];if(t<0||a<0)throw"Parse error of matrix.def";return this.connection_cost=new Mo(t,a),this.lines++,this}var f=e.split(" ");if(f.length!==3)return this;var l=parseInt(f[0]),h=parseInt(f[1]),y=parseInt(f[2]);if(l<0||h<0||!isFinite(l)||!isFinite(h)||this.connection_cost.forward_dimension<=l||this.connection_cost.backward_dimension<=h)throw"Parse error of matrix.def";return this.connection_cost.put(l,h,y),this.lines++,this};$t.prototype.build=function(){return this.connection_cost};var Ro=$t,mt=Bn,zo=jn,No=/^(\w+)\s+(\d)\s+(\d)\s+(\d)/,Vo=/^(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/,Go=/^(0x[0-9A-F]{4})\.\.(0x[0-9A-F]{4})(?:\s+([^#\s]+))(?:\s+([^#\s]+))*/;function re(){this.char_def=new mt,this.char_def.invoke_definition_map=new zo,this.character_category_definition=[],this.category_mapping=[]}re.prototype.putLine=function(e){var n=No.exec(e);if(n!=null){var t=this.character_category_definition.length,a=mt.parseCharCategory(t,n);if(a==null)return;this.character_category_definition.push(a);return}var f=Vo.exec(e);if(f!=null){var l=mt.parseCategoryMapping(f);this.category_mapping.push(l)}var h=Go.exec(e);if(h!=null){var y=mt.parseRangeCategoryMapping(h);this.category_mapping.push(y)}};re.prototype.build=function(){return this.char_def.invoke_definition_map.init(this.character_category_definition),this.char_def.initCategoryMappings(this.category_mapping),this.char_def};var qo=re,Ko=Dn,Wo=Un,Ho=Xt,Yo=Ro,Qo=qo,Xo=On;function lr(){this.tid_entries=[],this.unk_entries=[],this.cc_builder=new Yo,this.cd_builder=new Qo}lr.prototype.addTokenInfoDictionary=function(e){var n=e.split(",");return this.tid_entries.push(n),this};lr.prototype.putCostMatrixLine=function(e){return this.cc_builder.putLine(e),this};lr.prototype.putCharDefLine=function(e){return this.cd_builder.putLine(e),this};lr.prototype.putUnkDefLine=function(e){return this.unk_entries.push(e.split(",")),this};lr.prototype.build=function(){var e=this.buildTokenInfoDictionary(),n=this.buildUnknownDictionary();return new Wo(e.trie,e.token_info_dictionary,this.cc_builder.build(),n)};lr.prototype.buildTokenInfoDictionary=function(){var e=new Ho,n=e.buildDictionary(this.tid_entries),t=this.buildDoubleArray();for(var a in n){var f=n[a],l=t.lookup(f);e.addMapping(l,a)}return{trie:t,token_info_dictionary:e}};lr.prototype.buildUnknownDictionary=function(){var e=new Xo,n=e.buildDictionary(this.unk_entries),t=this.cd_builder.build();e.characterDefinition(t);for(var a in n){var f=n[a],l=t.invoke_definition_map.lookup(f);e.addMapping(l,a)}return e};lr.prototype.buildDoubleArray=function(){var e=0,n=this.tid_entries.map(function(a){var f=a[0];return{k:f,v:e++}}),t=Ko.builder(1024*1024);return t.build(n)};var Jo=lr,Zo=Po,$o=Jo,ru={builder:function(e){return new Zo(e)},dictionaryBuilder:function(){return new $o}},tu=ru;const iu=mn(tu);export{mn as g,nu as i,iu as k};
